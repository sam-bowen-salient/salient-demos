<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Salient Group ‚Äî Proposal Generator</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--navy:#131F2D;--white:#FFFFFF;--slate:#314151;--steel:#D6D7D8;--gray:#606060;--accent:#1a3a5c;--success:#2ecc71;--page-shadow:0 2px 20px rgba(0,0,0,.12)}
body{font-family:'Poppins',sans-serif;background:#f0f2f5;color:var(--slate);min-height:100vh}
.app-header{background:var(--navy);color:var(--white);padding:1rem 1.5rem;display:flex;align-items:center;gap:.75rem;position:sticky;top:0;z-index:100}
.app-header svg{width:32px;height:32px;flex-shrink:0}
.app-header h1{font-size:1.1rem;font-weight:600;letter-spacing:.5px}
.app-header span{font-size:.7rem;font-weight:300;opacity:.7;display:block;margin-top:2px}
.form-container{max-width:700px;margin:0 auto;padding:1rem}
.step-indicator{display:flex;gap:0;margin-bottom:1.5rem;background:var(--white);border-radius:12px;overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,.08)}
.step-dot{flex:1;text-align:center;padding:.75rem .25rem;font-size:.65rem;font-weight:500;color:var(--steel);background:var(--white);transition:.3s;cursor:pointer;border:none}
.step-dot.active{background:var(--navy);color:var(--white)}
.step-dot.completed{background:#1a3a5c;color:var(--white);opacity:.8}
.card{background:var(--white);border-radius:12px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 1px 4px rgba(0,0,0,.06)}
.card h2{font-size:1rem;font-weight:600;color:var(--navy);margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
.card h2 svg{width:20px;height:20px}
label.field{display:block;margin-bottom:1rem}
label.field .lbl{font-size:.75rem;font-weight:500;color:var(--gray);margin-bottom:4px;display:block}
input[type=text],input[type=email],input[type=tel],input[type=number],select,textarea{width:100%;padding:.65rem .75rem;border:1.5px solid var(--steel);border-radius:8px;font-family:inherit;font-size:.85rem;color:var(--slate);transition:border .2s;background:var(--white)}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--navy)}
select{-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23606060' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .75rem center}
.row{display:grid;gap:.75rem}
.row-2{grid-template-columns:1fr 1fr}
.row-3{grid-template-columns:1fr 1fr 1fr}
.checkbox-grid{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
.cb-item{display:flex;align-items:flex-start;gap:.4rem;font-size:.78rem;color:var(--slate);cursor:pointer}
.cb-item input[type=checkbox]{margin-top:3px;accent-color:var(--navy)}
.radio-group{display:flex;gap:.5rem;flex-wrap:wrap}
.radio-pill{display:flex;align-items:center;gap:.3rem;padding:.4rem .75rem;border:1.5px solid var(--steel);border-radius:20px;font-size:.78rem;cursor:pointer;transition:.2s}
.radio-pill:has(input:checked){background:var(--navy);color:var(--white);border-color:var(--navy)}
.radio-pill input{display:none}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;padding:.7rem 1.5rem;border:none;border-radius:8px;font-family:inherit;font-size:.85rem;font-weight:600;cursor:pointer;transition:.2s}
.btn-primary{background:var(--navy);color:var(--white)}
.btn-primary:hover{background:#1a2d3f}
.btn-outline{background:transparent;color:var(--navy);border:1.5px solid var(--navy)}
.btn-outline:hover{background:var(--navy);color:var(--white)}
.btn-row{display:flex;gap:.75rem;justify-content:flex-end;margin-top:1rem}
.step{display:none}
.step.active{display:block}
/* Roster Builder */
.roster-row{background:#f8f9fa;border-radius:8px;padding:1rem;margin-bottom:.75rem;position:relative;border:1px solid #eee}
.roster-row .row{margin-bottom:.5rem}
.roster-remove{position:absolute;top:.5rem;right:.5rem;background:none;border:none;cursor:pointer;color:#cc3333;font-size:1.1rem;padding:.2rem .4rem;border-radius:4px;line-height:1}
.roster-remove:hover{background:rgba(204,51,51,.1)}
.roster-totals{background:var(--navy);color:var(--white);border-radius:10px;padding:1.25rem;margin-top:1rem}
.roster-totals .rt-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.75rem;text-align:center}
.roster-totals .rt-val{font-size:1.1rem;font-weight:700}
.roster-totals .rt-label{font-size:.65rem;opacity:.7;margin-top:.15rem}
.add-position-btn{display:flex;align-items:center;gap:.4rem;padding:.6rem 1rem;background:transparent;border:1.5px dashed var(--navy);border-radius:8px;color:var(--navy);font-family:inherit;font-size:.82rem;font-weight:500;cursor:pointer;transition:.2s;width:100%}
.add-position-btn:hover{background:rgba(19,31,45,.05)}
.rate-toggle{display:flex;gap:0;border-radius:6px;overflow:hidden;border:1.5px solid var(--steel);width:fit-content}
.rate-toggle button{border:none;padding:.3rem .6rem;font-size:.7rem;font-family:inherit;cursor:pointer;background:var(--white);color:var(--slate);transition:.2s}
.rate-toggle button.active{background:var(--navy);color:var(--white)}
.rate-inputs{display:flex;gap:.4rem;align-items:center;margin-top:.3rem}
.rate-inputs input{width:80px}
.rate-inputs span{font-size:.75rem;color:var(--gray)}
.hour-presets-inline{display:flex;gap:.3rem;margin-top:.3rem}
.hour-presets-inline button{padding:.2rem .5rem;border:1px solid var(--steel);border-radius:4px;font-size:.68rem;cursor:pointer;background:var(--white);font-family:inherit;transition:.2s}
.hour-presets-inline button.active{background:var(--navy);color:var(--white);border-color:var(--navy)}
/* SLA Builder */
.sla-row{display:flex;gap:.5rem;align-items:flex-start;padding:.75rem;background:#f8f9fa;border-radius:8px;margin-bottom:.5rem;border:1px solid #eee}
.sla-row .sla-toggle{margin-top:.35rem;accent-color:var(--navy);flex-shrink:0}
.sla-row .sla-fields{flex:1;display:flex;flex-direction:column;gap:.3rem}
.sla-row .sla-fields input{font-size:.82rem;padding:.4rem .6rem}
.sla-row .sla-fields input.sla-label-input{font-weight:500}
.sla-row .sla-remove{background:none;border:none;cursor:pointer;color:#cc3333;font-size:.9rem;padding:.2rem;flex-shrink:0;opacity:.5}
.sla-row .sla-remove:hover{opacity:1}
.sla-row.disabled{opacity:.5}
/* Phase Builder */
.phase-row{background:#f8f9fa;border-radius:8px;padding:.75rem;margin-bottom:.5rem;border:1px solid #eee;position:relative}
.phase-row .row{margin-bottom:.3rem}
.phase-row .phase-remove{position:absolute;top:.4rem;right:.4rem;background:none;border:none;cursor:pointer;color:#cc3333;font-size:.9rem;padding:.2rem;opacity:.5}
.phase-row .phase-remove:hover{opacity:1}
.phase-row input,.phase-row textarea{font-size:.82rem;padding:.4rem .6rem}
.phase-row textarea{resize:vertical;min-height:40px}
/* PROPOSAL STYLES */
.proposal-view{display:none}
.proposal-actions{position:sticky;top:0;z-index:100;background:var(--navy);padding:.75rem 1rem;display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}
.proposal-actions .btn{padding:.5rem 1rem;font-size:.75rem;border-radius:6px}
.proposal-actions .btn-light{background:rgba(255,255,255,.15);color:var(--white);border:none}
.proposal-actions .btn-light:hover{background:rgba(255,255,255,.25)}
.proposal-actions .spacer{flex:1}
.proposal-body{max-width:850px;margin:0 auto;padding:1.5rem 1rem}
.page{background:var(--white);border-radius:4px;box-shadow:var(--page-shadow);margin-bottom:2rem;overflow:hidden;page-break-after:always}
.page-inner{padding:3rem 3.5rem}
@media(max-width:640px){.page-inner{padding:2rem 1.5rem}}
.page-header{display:flex;justify-content:space-between;align-items:center;padding:0 0 1.5rem;border-bottom:2px solid var(--navy);margin-bottom:1.5rem}
.page-header-logo{display:flex;align-items:center;gap:.5rem}
.page-header-logo svg{width:24px;height:24px}
.page-header-logo span{font-size:.7rem;font-weight:600;color:var(--navy);letter-spacing:.5px}
.page-number{font-size:.65rem;color:var(--gray)}
.page-footer{margin-top:2rem;padding-top:1rem;border-top:1px solid var(--steel);font-size:.6rem;color:var(--gray);text-align:center}
.cover{background:var(--navy);color:var(--white);min-height:80vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;position:relative;overflow:hidden}
.cover::before{content:'';position:absolute;top:-50%;right:-30%;width:80%;height:200%;background:radial-gradient(ellipse,rgba(255,255,255,.03) 0%,transparent 70%);pointer-events:none}
.cover-logo svg{width:80px;height:80px;margin-bottom:2rem}
.cover h1{font-size:2rem;font-weight:700;letter-spacing:1px;margin-bottom:.5rem}
.cover .cover-sub{font-size:1rem;font-weight:300;opacity:.8;margin-bottom:3rem}
.cover .cover-client{font-size:.85rem;font-weight:400;opacity:.6;text-transform:uppercase;letter-spacing:2px;margin-bottom:.25rem}
.cover .cover-company{font-size:1.5rem;font-weight:600;margin-bottom:3rem}
.cover .cover-date{font-size:.8rem;opacity:.5}
.cover .cover-footer{position:absolute;bottom:2rem;font-size:.7rem;opacity:.4}
.section-title{font-size:1.3rem;font-weight:700;color:var(--navy);margin-bottom:1rem;display:flex;align-items:center;gap:.6rem}
.section-title svg{width:24px;height:24px;flex-shrink:0}
.section-subtitle{font-size:.95rem;font-weight:600;color:var(--slate);margin:1.5rem 0 .75rem}
p.prose{font-size:.85rem;line-height:1.7;color:var(--gray);margin-bottom:1rem}
.p-table{width:100%;border-collapse:collapse;margin:1rem 0;font-size:.8rem}
.p-table th{background:var(--navy);color:var(--white);padding:.6rem .75rem;text-align:left;font-weight:500;font-size:.72rem;text-transform:uppercase;letter-spacing:.5px}
.p-table td{padding:.55rem .75rem;border-bottom:1px solid #eee;color:var(--slate)}
.p-table tr:nth-child(even) td{background:#f8f9fa}
.p-table th:first-child{border-radius:6px 0 0 0}.p-table th:last-child{border-radius:0 6px 0 0}
.schedule-grid{display:grid;grid-template-columns:140px repeat(7,1fr);gap:2px;margin:1rem 0;font-size:.65rem}
.schedule-grid .sg-header{background:var(--navy);color:var(--white);padding:.4rem;text-align:center;font-weight:500}
.schedule-grid .sg-label{background:#f8f9fa;padding:.4rem;font-weight:500;color:var(--slate);display:flex;align-items:center}
.schedule-grid .sg-cell{padding:.4rem;text-align:center;border-radius:2px}
.sg-active{background:#d4edda;color:#155724;font-weight:500}
.sg-inactive{background:#f8f9fa;color:#ccc}
.org-chart{display:flex;flex-direction:column;align-items:center;gap:0;margin:1.5rem 0}
.org-node{background:var(--navy);color:var(--white);padding:.6rem 1.2rem;border-radius:8px;font-size:.78rem;font-weight:500;text-align:center;position:relative;min-width:160px}
.org-node.support{background:var(--accent)}
.org-connector{width:2px;height:24px;background:var(--navy)}
.org-row{display:flex;gap:1.5rem;align-items:flex-start;justify-content:center;position:relative}
.org-row::before{content:'';position:absolute;top:0;left:25%;right:25%;height:2px;background:var(--navy)}
.org-branch{display:flex;flex-direction:column;align-items:center}
.org-branch .org-connector{height:16px}
.timeline{margin:1rem 0}
.tl-item{display:flex;gap:1rem;margin-bottom:1.5rem;position:relative}
.tl-dot{width:36px;height:36px;border-radius:50%;background:var(--navy);color:var(--white);display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600;flex-shrink:0;position:relative;z-index:1}
.tl-item:not(:last-child) .tl-dot::after{content:'';position:absolute;top:36px;left:50%;width:2px;height:calc(100% + 12px);background:var(--steel);transform:translateX(-50%)}
.tl-content h4{font-size:.85rem;font-weight:600;color:var(--navy);margin-bottom:.2rem}
.tl-content p{font-size:.78rem;color:var(--gray);line-height:1.5}
.sla-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin:1rem 0}
.sla-item{background:#f8f9fa;border-radius:8px;padding:1rem;border-left:3px solid var(--navy)}
.sla-item .sla-val{font-size:1.1rem;font-weight:700;color:var(--navy)}
.sla-item .sla-label{font-size:.72rem;color:var(--gray);margin-top:.2rem}
.why-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin:1rem 0}
.why-card{background:linear-gradient(135deg,#f8f9fa,#fff);border-radius:8px;padding:1rem;border:1px solid #eee}
.why-card h4{font-size:.82rem;font-weight:600;color:var(--navy);margin-bottom:.3rem;display:flex;align-items:center;gap:.4rem}
.why-card h4 svg{width:16px;height:16px}
.why-card p{font-size:.75rem;color:var(--gray);line-height:1.5}
.roi-box{background:var(--navy);color:var(--white);border-radius:10px;padding:1.5rem;margin:1.5rem 0}
.roi-box h3{font-size:1rem;font-weight:600;margin-bottom:.75rem;text-align:center}
.roi-row{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,.15);font-size:.85rem}
.roi-row:last-child{border-bottom:none}
.roi-row .roi-label{opacity:.85;font-size:.8rem}
.roi-row .roi-val{font-weight:600;text-align:right}
.roi-row.highlight{font-size:.95rem;padding:.75rem 0}
.roi-row.highlight .roi-val{color:#2ecc71;font-size:1.1rem}
.roi-note{font-size:.7rem;opacity:.6;margin-top:.75rem;line-height:1.5;text-align:center;font-style:italic}
.cta-box{background:linear-gradient(135deg,var(--navy),#1a3a5c);color:var(--white);border-radius:12px;padding:2rem;text-align:center;margin:1.5rem 0}
.cta-box h3{font-size:1.2rem;font-weight:700;margin-bottom:.5rem}
.cta-box p{font-size:.85rem;opacity:.8;margin-bottom:1rem}
.cta-btn{display:inline-block;background:var(--white);color:var(--navy);padding:.7rem 2rem;border-radius:8px;font-weight:600;font-size:.85rem;text-decoration:none;transition:.2s}
.cta-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.2)}
.disclaimer{background:#fff8e1;border:1px solid #ffe082;border-radius:8px;padding:.75rem 1rem;font-size:.75rem;color:#6d4c00;margin:1rem 0;line-height:1.5}
.terms-list{list-style:none;padding:0}
.terms-list li{font-size:.78rem;color:var(--gray);padding:.4rem 0;border-bottom:1px solid #f0f0f0;display:flex;align-items:flex-start;gap:.5rem;line-height:1.5}
.terms-list li::before{content:'¬ß';color:var(--navy);font-weight:600}
@media print{
body{background:#fff}
.proposal-actions,.app-header,.form-container{display:none!important}
.proposal-view{display:block!important}
.page{box-shadow:none;margin:0;border-radius:0;page-break-after:always}
.page-inner{padding:2cm 2.5cm}
}
@media(max-width:640px){
.row-2,.row-3{grid-template-columns:1fr}
.checkbox-grid{grid-template-columns:1fr}
.sla-grid,.why-grid{grid-template-columns:1fr}
.schedule-grid{font-size:.55rem;grid-template-columns:80px repeat(7,1fr)}
.cover h1{font-size:1.5rem}
.org-row{flex-direction:column;align-items:center}
.org-row::before{display:none}
.roster-row .row-2,.roster-row .row-3{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div class="app-header" id="appHeader">
<svg viewBox="0 0 40 40" fill="none"><path d="M20 2L4 10v12c0 9.33 6.82 18.06 16 20 9.18-1.94 16-10.67 16-20V10L20 2z" fill="#fff" opacity=".15"/><path d="M20 5L7 11.5v10.5c0 7.93 5.64 15.36 13 17 7.36-1.64 13-9.07 13-17V11.5L20 5z" stroke="#fff" stroke-width="1.5" fill="none"/><path d="M15 20l3 3 7-7" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
<h1>Salient Group <span>Proposal Generator v4</span></h1>
</div>

<div class="form-container" id="formContainer">
<div class="step-indicator">
<button class="step-dot active" onclick="goStep(1)">1. Client</button>
<button class="step-dot" onclick="goStep(2)">2. Site</button>
<button class="step-dot" onclick="goStep(3)">3. Security</button>
<button class="step-dot" onclick="goStep(4)">4. SLAs</button>
<button class="step-dot" onclick="goStep(5)">5. Preview</button>
</div>

<!-- STEP 1 -->
<div class="step active" id="step1">
<div class="card">
<h2><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> Client Information</h2>
<label class="field"><span class="lbl">Company Name *</span><input type="text" id="companyName" required></label>
<div class="row row-2">
<label class="field"><span class="lbl">Contact Name *</span><input type="text" id="contactName" required></label>
<label class="field"><span class="lbl">Title</span><input type="text" id="contactTitle"></label>
</div>
<div class="row row-2">
<label class="field"><span class="lbl">Email</span><input type="email" id="contactEmail"></label>
<label class="field"><span class="lbl">Phone</span><input type="tel" id="contactPhone"></label>
</div>
<label class="field"><span class="lbl">Street Address</span><input type="text" id="addrStreet"></label>
<div class="row row-3">
<label class="field"><span class="lbl">City</span><input type="text" id="addrCity"></label>
<label class="field"><span class="lbl">State</span><select id="addrState"><option value="">‚Äî</option></select></label>
<label class="field"><span class="lbl">Zip</span><input type="text" id="addrZip"></label>
</div>
<label class="field"><span class="lbl">Industry Vertical *</span>
<select id="industry">
<option value="">Select‚Ä¶</option>
<option>Logistics/Distribution</option><option>Commercial Real Estate</option><option>Construction</option><option>Healthcare</option><option>Education</option><option>Events/Entertainment</option><option>HOA/Residential</option><option>Hospitality</option><option>Retail</option><option>Manufacturing</option><option>Other</option>
</select></label>
</div>
<div class="btn-row"><button class="btn btn-primary" onclick="goStep(2)">Continue ‚Üí</button></div>
</div>

<!-- STEP 2 -->
<div class="step" id="step2">
<div class="card">
<h2><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg> Site Details</h2>
<label class="field"><span class="lbl">Facility Type *</span>
<select id="facilityType"><option value="">Select‚Ä¶</option><option>Warehouse</option><option>Office Building</option><option>Campus</option><option>Retail</option><option>Hospital</option><option>Construction Site</option><option>Residential Community</option><option>Event Venue</option><option>Other</option></select></label>
<div class="row row-2">
<label class="field"><span class="lbl">Approx. Square Footage</span>
<select id="sqft"><option value="">Select‚Ä¶</option><option value="<10,000">&lt;10,000</option><option value="10,000‚Äì50,000">10,000‚Äì50,000</option><option value="50,000‚Äì100,000">50,000‚Äì100,000</option><option value="100,000‚Äì250,000">100,000‚Äì250,000</option><option value="250,000‚Äì500,000">250,000‚Äì500,000</option><option value="500,000+">500,000+</option></select></label>
<label class="field"><span class="lbl">Number of Entrances</span><input type="number" id="entrances" min="1" value="2"></label>
</div>
<div class="row row-2">
<label class="field"><span class="lbl">Number of Buildings</span><input type="number" id="buildings" min="1" value="1"></label>
<label class="field"><span class="lbl">Parking Lots</span>
<select id="parking"><option value="No">No</option><option value="1">Yes ‚Äî 1</option><option value="2">Yes ‚Äî 2</option><option value="3">Yes ‚Äî 3</option><option value="4+">Yes ‚Äî 4+</option></select></label>
</div>
<label class="field"><span class="lbl">Hours of Operation</span>
<div class="radio-group">
<label class="radio-pill"><input type="radio" name="hours" value="24/7" checked>24/7</label>
<label class="radio-pill"><input type="radio" name="hours" value="Business Hours">Business Hours</label>
<label class="radio-pill"><input type="radio" name="hours" value="Custom">Custom</label>
</div></label>
<label class="field"><span class="lbl">Current Security Provider (optional)</span><input type="text" id="currentProvider" placeholder="Leave blank if none"></label>
<label class="field"><span class="lbl">What's not working with current provider?</span>
<div class="checkbox-grid">
<label class="cb-item"><input type="checkbox" name="pain" value="guards_no_show">Guards don't show up</label>
<label class="cb-item"><input type="checkbox" name="pain" value="cant_reach">Can't reach anyone</label>
<label class="cb-item"><input type="checkbox" name="pain" value="no_visibility">No visibility/reporting</label>
<label class="cb-item"><input type="checkbox" name="pain" value="high_turnover">High turnover/new faces</label>
<label class="cb-item"><input type="checkbox" name="pain" value="cookie_cutter">Cookie-cutter approach</label>
<label class="cb-item"><input type="checkbox" name="pain" value="too_expensive">Too expensive for what we get</label>
<label class="cb-item"><input type="checkbox" name="pain" value="no_manager">No dedicated manager</label>
<label class="cb-item"><input type="checkbox" name="pain" value="other">Other</label>
</div></label>
</div>
<div class="btn-row">
<button class="btn btn-outline" onclick="goStep(1)">‚Üê Back</button>
<button class="btn btn-primary" onclick="goStep(3)">Continue ‚Üí</button>
</div>
</div>

<!-- STEP 3: Guard Roster Builder + Services + Concerns -->
<div class="step" id="step3">
<div class="card">
<h2><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> Guard Roster Builder</h2>
<div id="rosterRows"></div>
<button type="button" class="add-position-btn" onclick="addRosterRow()">+ Add Position</button>
<div class="roster-totals" id="rosterTotals">
<div class="rt-grid">
<div><div class="rt-val" id="rtPersonnel">0</div><div class="rt-label">Total Personnel</div></div>
<div><div class="rt-val" id="rtHours">0</div><div class="rt-label">Weekly Hours</div></div>
<div><div class="rt-val" id="rtWeekly">$0</div><div class="rt-label">Weekly Cost</div></div>
<div><div class="rt-val" id="rtMonthly">$0</div><div class="rt-label">Monthly Cost</div></div>
<div><div class="rt-val" id="rtAnnual">$0</div><div class="rt-label">Annual Cost</div></div>
</div>
</div>
</div>
<div class="card">
<h2><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg> Additional Services & Concerns</h2>
<label class="field"><span class="lbl">Special Services</span>
<div class="checkbox-grid">
<label class="cb-item"><input type="checkbox" name="service" value="Access Control/Gate Management">Access Control / Gate Mgmt</label>
<label class="cb-item"><input type="checkbox" name="service" value="Mobile Patrol">Mobile Patrol</label>
<label class="cb-item"><input type="checkbox" name="service" value="CCTV/Camera Monitoring">CCTV / Camera Monitoring</label>
<label class="cb-item"><input type="checkbox" name="service" value="Visitor Management">Visitor Management</label>
<label class="cb-item"><input type="checkbox" name="service" value="Loading Dock Security">Loading Dock Security</label>
<label class="cb-item"><input type="checkbox" name="service" value="Parking Enforcement">Parking Enforcement</label>
<label class="cb-item"><input type="checkbox" name="service" value="Emergency Response">Emergency Response</label>
<label class="cb-item"><input type="checkbox" name="service" value="Executive Protection">Executive Protection</label>
<label class="cb-item"><input type="checkbox" name="service" value="Event Security">Event Security</label>
<label class="cb-item"><input type="checkbox" name="service" value="Fire Watch">Fire Watch</label>
</div></label>
<label class="field"><span class="lbl">Priority Concerns</span>
<div class="checkbox-grid">
<label class="cb-item"><input type="checkbox" name="concern" value="Theft/Shrinkage">Theft / Shrinkage</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Unauthorized Access">Unauthorized Access</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Employee Safety">Employee Safety</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Liability Reduction">Liability Reduction</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Vandalism">Vandalism</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Workplace Violence">Workplace Violence</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Regulatory Compliance">Regulatory Compliance</label>
<label class="cb-item"><input type="checkbox" name="concern" value="Asset Protection">Asset Protection</label>
</div></label>
</div>
<div class="btn-row">
<button class="btn btn-outline" onclick="goStep(2)">‚Üê Back</button>
<button class="btn btn-primary" onclick="goStep(4)">Continue ‚Üí</button>
</div>
</div>

<!-- STEP 4: Service Commitments (SLAs + Implementation Timeline) -->
<div class="step" id="step4">
<div class="card">
<h2><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg> Service Level Agreements</h2>
<p style="font-size:.78rem;color:var(--gray);margin-bottom:.75rem">Toggle items on/off and edit text to customize what appears in the proposal.</p>
<div id="slaRows"></div>
<button type="button" class="add-position-btn" onclick="addSlaRow('','')">+ Add SLA</button>
</div>
<div class="card">
<h2><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg> Implementation Timeline</h2>
<p style="font-size:.78rem;color:var(--gray);margin-bottom:.75rem">Customize the implementation phases, durations, and descriptions.</p>
<div id="phaseRows"></div>
<button type="button" class="add-position-btn" onclick="addPhaseRow('','','')">+ Add Phase</button>
</div>
<div class="btn-row">
<button class="btn btn-outline" onclick="goStep(3)">‚Üê Back</button>
<button class="btn btn-primary" onclick="generateProposal()">Generate Proposal ‚Üí</button>
</div>
</div>

<!-- PROPOSAL VIEW -->
<div class="proposal-view" id="proposalView">
<div class="proposal-actions">
<button class="btn btn-light" onclick="editProposal()">‚Üê Edit</button>
<div class="spacer"></div>
<button class="btn btn-light" onclick="window.print()">üñ® Print / PDF</button>
<button class="btn btn-light" id="emailBtn">‚úâ Email</button>
<button class="btn btn-light" onclick="copyProposal()">üìã Copy</button>
</div>
<div class="proposal-body" id="proposalBody"></div>
</div>

<script>
const STATES=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","DC"];
const stSel=document.getElementById('addrState');
STATES.forEach(s=>{const o=document.createElement('option');o.value=s;o.textContent=s;stSel.appendChild(o)});

const GUARD_TYPES=[
{id:'security_officer',label:'Security Officer (Unarmed)',rateMin:22,rateMax:25},
{id:'armed_officer',label:'Armed Security Officer',rateMin:29,rateMax:34},
{id:'shift_supervisor',label:'Shift Supervisor',rateMin:26,rateMax:30},
{id:'site_manager',label:'Site Manager',rateMin:32,rateMax:38},
{id:'asst_site_manager',label:'Assistant Site Manager',rateMin:28,rateMax:33},
{id:'mobile_patrol',label:'Mobile Patrol Officer',rateMin:24,rateMax:28},
{id:'access_control',label:'Access Control Specialist',rateMin:24,rateMax:28},
{id:'fire_watch',label:'Fire Watch Officer',rateMin:24,rateMax:28},
{id:'event_security',label:'Event Security Officer',rateMin:23,rateMax:27},
{id:'executive_protection',label:'Executive Protection Agent',rateMin:45,rateMax:65}
];

const POSITION_DESCRIPTIONS={
'site_manager':'Oversees all security operations, serves as primary client liaison, manages staffing and scheduling, conducts performance reviews, ensures compliance with post orders and company standards.',
'asst_site_manager':'Supports the Site Manager in daily operations, fills in during absences, assists with training and quality assurance, handles incident escalation.',
'shift_supervisor':'Leads guard team during assigned shift, conducts guard check-ins and inspections, manages break rotations, handles real-time incident response and reporting.',
'security_officer':'Executes post orders, conducts patrols, monitors access points, documents incidents, provides visible security presence, reports to Shift Supervisor.',
'armed_officer':'All Security Officer duties plus armed response capability, high-value asset protection, enhanced threat deterrence. State-licensed and firearms certified.',
'mobile_patrol':'Conducts scheduled and random patrol routes across facility grounds, parking areas, and perimeter. Vehicle-based with GPS tracking and checkpoint verification.',
'access_control':'Manages entry/exit points, verifies credentials, maintains visitor logs, operates gate systems, monitors vehicle and pedestrian traffic.',
'fire_watch':'Conducts continuous fire hazard monitoring during hot work operations or when fire suppression systems are offline. Maintains fire watch logs per OSHA/NFPA requirements.',
'event_security':'Crowd management, perimeter security, VIP protection, emergency evacuation coordination, and guest assistance for events and special occasions.',
'executive_protection':'Close protection for executives and VIPs, advance route planning, threat assessment, secure transportation coordination.'
};

let rosterCounter=0;

function addRosterRow(typeId){
rosterCounter++;
const id=rosterCounter;
const container=document.getElementById('rosterRows');
const div=document.createElement('div');
div.className='roster-row';
div.id='roster-'+id;
div.innerHTML=`
<button type="button" class="roster-remove" onclick="removeRosterRow(${id})" title="Remove">üóë</button>
<div class="row row-2">
<label class="field" style="margin-bottom:.5rem"><span class="lbl">Position Type</span>
<select onchange="onTypeChange(${id})" id="rtype-${id}">
<option value="">Select‚Ä¶</option>
${GUARD_TYPES.map(g=>`<option value="${g.id}" ${typeId===g.id?'selected':''}>${g.label}</option>`).join('')}
</select></label>
<label class="field" style="margin-bottom:.5rem"><span class="lbl">Quantity</span>
<input type="number" id="rqty-${id}" min="1" value="1" onchange="updateTotals()" oninput="updateTotals()"></label>
</div>
<label class="field" style="margin-bottom:.5rem"><span class="lbl">Assignment / Location (optional)</span>
<input type="text" id="rloc-${id}" placeholder='e.g., "Truck Gate", "Guard Shack - East", "Lobby Desk"'></label>
<div class="row row-2">
<label class="field" style="margin-bottom:.5rem"><span class="lbl">Hours/Week per Person</span>
<input type="number" id="rhrs-${id}" min="1" max="168" value="40" onchange="updateTotals()" oninput="updateTotals()">
<div class="hour-presets-inline">
<button type="button" onclick="setRowHours(${id},40,this)" class="active">40</button>
<button type="button" onclick="setRowHours(${id},48,this)">48</button>
<button type="button" onclick="setRowHours(${id},56,this)">56</button>
<button type="button" onclick="setRowHours(${id},84,this)">84</button>
<button type="button" onclick="setRowHours(${id},168,this)">168</button>
</div></label>
<label class="field" style="margin-bottom:.5rem"><span class="lbl">Rate</span>
<div class="rate-toggle" id="rtoggle-${id}">
<button type="button" class="active" onclick="setRateMode(${id},'range',this)">Range</button>
<button type="button" onclick="setRateMode(${id},'exact',this)">Exact</button>
</div>
<div class="rate-inputs" id="rinputs-${id}">
<span>$</span><input type="number" id="rmin-${id}" min="0" step="0.5" value="22" onchange="updateTotals()" oninput="updateTotals()">
<span>‚Äì</span><input type="number" id="rmax-${id}" min="0" step="0.5" value="25" onchange="updateTotals()" oninput="updateTotals()">
<span>/hr</span>
</div></label>
</div>
<input type="hidden" id="rmode-${id}" value="range">
`;
container.appendChild(div);
if(typeId) onTypeChange(id);
updateTotals();
}

function removeRosterRow(id){
const el=document.getElementById('roster-'+id);
if(el) el.remove();
updateTotals();
}

function onTypeChange(id){
const sel=document.getElementById('rtype-'+id);
const gt=GUARD_TYPES.find(g=>g.id===sel.value);
if(gt){
const mode=document.getElementById('rmode-'+id).value;
document.getElementById('rmin-'+id).value=gt.rateMin;
if(mode==='range') document.getElementById('rmax-'+id).value=gt.rateMax;
else document.getElementById('rmax-'+id).value=gt.rateMin;
}
updateTotals();
}

function setRowHours(id,val,btn){
document.getElementById('rhrs-'+id).value=val;
const parent=btn.parentElement;
parent.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
updateTotals();
}

function setRateMode(id,mode,btn){
document.getElementById('rmode-'+id).value=mode;
const toggle=document.getElementById('rtoggle-'+id);
toggle.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
const inputs=document.getElementById('rinputs-'+id);
const minEl=document.getElementById('rmin-'+id);
const maxEl=document.getElementById('rmax-'+id);
if(mode==='exact'){
maxEl.style.display='none';
inputs.querySelectorAll('span')[1].style.display='none';
}else{
maxEl.style.display='';
inputs.querySelectorAll('span')[1].style.display='';
const gt=GUARD_TYPES.find(g=>g.id===document.getElementById('rtype-'+id).value);
if(gt) maxEl.value=gt.rateMax;
}
updateTotals();
}

function getRosterData(){
const rows=[];
document.querySelectorAll('.roster-row').forEach(el=>{
const id=el.id.replace('roster-','');
const typeId=document.getElementById('rtype-'+id).value;
if(!typeId) return;
const gt=GUARD_TYPES.find(g=>g.id===typeId);
const qty=parseInt(document.getElementById('rqty-'+id).value)||1;
const hrs=parseInt(document.getElementById('rhrs-'+id).value)||40;
const mode=document.getElementById('rmode-'+id).value;
const rateMin=parseFloat(document.getElementById('rmin-'+id).value)||0;
const rateMax=mode==='exact'?rateMin:(parseFloat(document.getElementById('rmax-'+id).value)||rateMin);
const location=(document.getElementById('rloc-'+id).value||'').trim();
rows.push({typeId,label:gt?gt.label:typeId,qty,hrs,mode,rateMin,rateMax,location});
});
return rows;
}

function updateTotals(){
const rows=getRosterData();
let personnel=0,hours=0,weeklyMin=0,weeklyMax=0;
rows.forEach(r=>{
personnel+=r.qty;
hours+=r.qty*r.hrs;
weeklyMin+=r.qty*r.hrs*r.rateMin;
weeklyMax+=r.qty*r.hrs*r.rateMax;
});
const fmt=n=>'$'+Math.round(n).toLocaleString();
const fmtRange=(a,b)=>a===b?fmt(a):fmt(a)+'‚Äì'+fmt(b);
document.getElementById('rtPersonnel').textContent=personnel;
document.getElementById('rtHours').textContent=hours.toLocaleString();
document.getElementById('rtWeekly').textContent=fmtRange(weeklyMin,weeklyMax);
document.getElementById('rtMonthly').textContent=fmtRange(Math.round(weeklyMin*4.33),Math.round(weeklyMax*4.33));
document.getElementById('rtAnnual').textContent=fmtRange(weeklyMin*52,weeklyMax*52);
}

addRosterRow();

// === SLA BUILDER ===
const DEFAULT_SLAS=[
{label:'Initial Deployment Timeline',value:'30-45 days from contract execution'},
{label:'Incident Response Time',value:'Under 15 minutes on-site'},
{label:'Guard Replacement',value:'Same-shift replacement for any no-call/no-show'},
{label:'Supervisor Site Visits',value:'Minimum weekly on-site supervisor inspections'},
{label:'Reporting',value:'Monthly detailed analytics and incident report'},
{label:'Business Reviews',value:'Quarterly business review with dedicated account manager'},
{label:'Operations Support',value:'24/7 operations support line for emergencies'},
{label:'Satisfaction Guarantee',value:'90-day satisfaction guarantee'}
];
let slaCounter=0;
function addSlaRow(label,value,enabled=true){
slaCounter++;
const id=slaCounter;
const container=document.getElementById('slaRows');
const div=document.createElement('div');
div.className='sla-row'+(enabled?'':' disabled');
div.id='sla-'+id;
div.innerHTML=`
<input type="checkbox" class="sla-toggle" id="slat-${id}" ${enabled?'checked':''} onchange="document.getElementById('sla-${id}').classList.toggle('disabled',!this.checked)">
<div class="sla-fields">
<input type="text" class="sla-label-input" id="slal-${id}" value="${label.replace(/"/g,'&quot;')}" placeholder="SLA Name">
<input type="text" id="slav-${id}" value="${value.replace(/"/g,'&quot;')}" placeholder="Commitment details">
</div>
<button type="button" class="sla-remove" onclick="document.getElementById('sla-${id}').remove()" title="Remove">üóë</button>
`;
container.appendChild(div);
}
function getSlaData(){
const items=[];
document.querySelectorAll('.sla-row').forEach(el=>{
const id=el.id.replace('sla-','');
const enabled=document.getElementById('slat-'+id).checked;
const label=document.getElementById('slal-'+id).value.trim();
const value=document.getElementById('slav-'+id).value.trim();
if(label||value) items.push({label,value,enabled});
});
return items;
}
DEFAULT_SLAS.forEach(s=>addSlaRow(s.label,s.value,true));

// === PHASE BUILDER ===
const DEFAULT_PHASES=[
{name:'Site Assessment & Security Audit',duration:'Week 1-2',desc:'Comprehensive site survey, threat assessment, and security plan development'},
{name:'Custom Post Orders & Staffing',duration:'Week 2-3',desc:'Develop detailed post orders, recruit and select qualified officers'},
{name:'Training & Orientation',duration:'Week 3-4',desc:'Site-specific training, client protocols, emergency procedures, technology onboarding'},
{name:'Go-Live & Transition Support',duration:'Week 4-6',desc:'Full deployment with on-site management oversight during transition period'}
];
let phaseCounter=0;
function addPhaseRow(name,duration,desc){
phaseCounter++;
const id=phaseCounter;
const container=document.getElementById('phaseRows');
const div=document.createElement('div');
div.className='phase-row';
div.id='phase-'+id;
div.innerHTML=`
<button type="button" class="phase-remove" onclick="document.getElementById('phase-${id}').remove()" title="Remove">üóë</button>
<div class="row row-2" style="margin-bottom:.3rem">
<label class="field" style="margin-bottom:0"><span class="lbl">Phase Name</span>
<input type="text" id="pname-${id}" value="${(name||'').replace(/"/g,'&quot;')}" placeholder="Phase name"></label>
<label class="field" style="margin-bottom:0"><span class="lbl">Duration</span>
<input type="text" id="pdur-${id}" value="${(duration||'').replace(/"/g,'&quot;')}" placeholder="e.g., Week 1-2"></label>
</div>
<label class="field" style="margin-bottom:0"><span class="lbl">Description</span>
<textarea id="pdesc-${id}" rows="2" placeholder="Phase description">${(desc||'').replace(/</g,'&lt;')}</textarea></label>
`;
container.appendChild(div);
}
function getPhaseData(){
const items=[];
document.querySelectorAll('.phase-row').forEach(el=>{
const id=el.id.replace('phase-','');
const name=document.getElementById('pname-'+id).value.trim();
const duration=document.getElementById('pdur-'+id).value.trim();
const desc=document.getElementById('pdesc-'+id).value.trim();
if(name) items.push({name,duration,desc});
});
return items;
}
DEFAULT_PHASES.forEach(p=>addPhaseRow(p.name,p.duration,p.desc));

// === NAV ===
function goStep(n){
document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
document.getElementById('step'+n).classList.add('active');
document.querySelectorAll('.step-dot').forEach((d,i)=>{d.classList.remove('active','completed');if(i+1===n)d.classList.add('active');else if(i+1<n)d.classList.add('completed')});
window.scrollTo(0,0);
}
function getChecked(name){return[...document.querySelectorAll(`input[name="${name}"]:checked`)].map(c=>c.value)}
function getRadio(name){const c=document.querySelector(`input[name="${name}"]:checked`);return c?c.value:''}
function v(id){return document.getElementById(id).value.trim()}

// Helper: display name for a roster row (with location)
function displayName(r){
if(r.location) return r.label+' ‚Äî '+r.location;
return r.label;
}
// Short display name for pricing/schedule
function shortName(r){
const base=r.label.replace(/ \(Unarmed\)/,'').replace(/ Officer/,' Off.').replace(/ Specialist/,' Spec.');
if(r.location) return base+' ‚Äî '+r.location;
return r.label;
}

const INDUSTRY_DATA={
"Logistics/Distribution":{
threats:"The logistics and distribution sector faces significant security challenges. Industry reports indicate cargo theft costs businesses between $15 and $35 billion annually in the United States alone. Distribution facilities are particularly vulnerable to shrinkage, unauthorized access, and internal theft. With constant truck traffic, driver management and loading dock oversight remain critical pain points. High-value goods in transit and in storage require vigilant monitoring, and the 24/7 nature of logistics operations means security gaps can occur during shift transitions.",
riskBySize:{'<10,000':[150000,400000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[400000,800000],'100,000‚Äì250,000':[400000,1200000],'250,000‚Äì500,000':[1200000,3000000],'500,000+':[1200000,5000000],'default':[300000,1000000]}
},
"Commercial Real Estate":{
threats:"Commercial real estate properties face a unique combination of security challenges. Property managers must balance tenant safety and satisfaction with liability mitigation and property value protection. After-hours security is critical ‚Äî industry data shows that the majority of commercial property crimes occur between 6 PM and 6 AM. Unauthorized access, vandalism, and theft not only create direct losses but can reduce property values and increase insurance premiums. Multi-tenant environments require sophisticated access control and consistent security protocols across diverse business needs.",
riskBySize:{'<10,000':[75000,200000],'10,000‚Äì50,000':[100000,300000],'50,000‚Äì100,000':[150000,400000],'100,000‚Äì250,000':[200000,500000],'250,000‚Äì500,000':[300000,700000],'500,000+':[400000,900000],'default':[150000,450000]}
},
"Construction":{
threats:"Construction sites are among the most vulnerable targets for theft and vandalism. Industry reports indicate that construction site theft exceeds $1 billion annually in the United States, with the average theft incident costing between $10,000 and $50,000 in materials and equipment. Unsecured sites also face risks from unauthorized access ‚Äî creating OSHA compliance concerns and significant liability exposure. Vandalism can delay project timelines by weeks, and copper theft alone accounts for hundreds of millions in annual losses across the industry.",
riskBySize:{'<10,000':[100000,300000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,500000],'100,000‚Äì250,000':[300000,700000],'250,000‚Äì500,000':[400000,900000],'500,000+':[500000,1200000],'default':[200000,600000]}
},
"Healthcare":{
threats:"Healthcare facilities operate under a complex security landscape that intersects patient safety, regulatory compliance, and workplace violence prevention. Emergency departments experience some of the highest rates of workplace violence of any industry. HIPAA compliance requires strict access control to protect patient information. Pharmacy security demands constant vigilance against theft of controlled substances. Infant abduction prevention, patient elopement, and visitor management add layers of complexity that require specialized security training and protocols.",
riskBySize:{'<10,000':[150000,400000],'10,000‚Äì50,000':[200000,500000],'50,000‚Äì100,000':[300000,700000],'100,000‚Äì250,000':[400000,1000000],'250,000‚Äì500,000':[500000,1500000],'500,000+':[700000,2000000],'default':[300000,800000]}
},
"Education":{
threats:"Educational institutions face an evolving threat landscape that demands proactive, layered security solutions. Campus safety concerns range from active threat preparedness to everyday access control challenges. Large campuses with multiple buildings, open grounds, and diverse populations require coordinated security strategies. Event security for athletic competitions, graduations, and public gatherings adds seasonal complexity. Industry data indicates that institutions with visible, professional security presence report improved student enrollment, parent confidence, and community relations.",
riskBySize:{'<10,000':[100000,300000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,500000],'100,000‚Äì250,000':[250000,600000],'250,000‚Äì500,000':[300000,800000],'500,000+':[400000,1000000],'default':[200000,500000]}
},
"Events/Entertainment":{
threats:"Events and entertainment venues face high-intensity, concentrated security challenges. Crowd management, VIP protection, perimeter security, and emergency evacuation planning require experienced security professionals who can adapt to dynamic environments. Industry reports indicate that inadequate event security is a leading cause of liability claims in the entertainment sector. From concerts and festivals to corporate gatherings and sporting events, each venue presents unique challenges based on capacity, layout, and audience demographics.",
riskBySize:{'<10,000':[100000,300000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,500000],'100,000‚Äì250,000':[250000,600000],'250,000‚Äì500,000':[300000,800000],'500,000+':[400000,1000000],'default':[150000,450000]}
},
"HOA/Residential":{
threats:"Residential communities face distinct security challenges centered on access control, resident safety, and quality of life. Gate management and visitor verification are foundational requirements, while package theft, vehicle break-ins, and vandalism remain persistent concerns. HOA communities must balance visible security presence with a welcoming atmosphere. Industry data shows that communities with professional security programs report higher property values, improved resident satisfaction, and reduced crime rates compared to unguarded counterparts.",
riskBySize:{'<10,000':[75000,200000],'10,000‚Äì50,000':[100000,300000],'50,000‚Äì100,000':[150000,400000],'100,000‚Äì250,000':[200000,500000],'250,000‚Äì500,000':[250000,600000],'500,000+':[300000,800000],'default':[125000,350000]}
},
"Hospitality":{
threats:"The hospitality industry requires security solutions that protect guests, staff, and assets while maintaining the welcoming environment essential to guest satisfaction. Hotels and resorts face threats including guest room theft, parking lot incidents, trespassing, and late-night disturbances. Industry data indicates that properties with visible security presence receive higher guest satisfaction scores and fewer liability claims. The 24/7 nature of hospitality operations demands round-the-clock coverage with officers trained in customer service and de-escalation.",
riskBySize:{'<10,000':[100000,250000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,500000],'100,000‚Äì250,000':[250000,600000],'250,000‚Äì500,000':[300000,700000],'500,000+':[400000,900000],'default':[150000,400000]}
},
"Retail":{
threats:"Retail environments face ongoing challenges from organized retail crime, shoplifting, employee theft, and parking lot safety. Industry reports indicate that retail shrinkage exceeds $100 billion annually nationwide, with the average retailer losing 1.4% of revenue to theft and fraud. Loss prevention requires a combination of visible deterrence, access control, and technology-integrated monitoring. Parking lot incidents ‚Äî including vehicle theft, assault, and slip-and-fall claims ‚Äî represent a significant portion of retail liability exposure.",
riskBySize:{'<10,000':[100000,250000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,500000],'100,000‚Äì250,000':[300000,700000],'250,000‚Äì500,000':[400000,900000],'500,000+':[500000,1200000],'default':[200000,500000]}
},
"Manufacturing":{
threats:"Manufacturing facilities face a range of security threats including intellectual property theft, equipment and material theft, hazardous materials compliance, and workforce safety concerns. Shift change management creates predictable vulnerability windows that require dedicated oversight. Industry data shows that manufacturing sites with comprehensive security programs experience fewer workplace incidents, reduced theft, and improved regulatory compliance. The high value of machinery, raw materials, and finished goods makes access control and perimeter security essential investments.",
riskBySize:{'<10,000':[100000,300000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,600000],'100,000‚Äì250,000':[300000,800000],'250,000‚Äì500,000':[400000,1000000],'500,000+':[500000,1500000],'default':[200000,600000]}
},
"Other":{
threats:"Every facility faces unique security challenges shaped by its industry, location, operations, and workforce. From access control and perimeter security to emergency response and regulatory compliance, a comprehensive security program must be tailored to the specific risk profile of each environment. Industry data consistently shows that organizations with professional, dedicated security programs experience fewer incidents, lower liability costs, and improved operational efficiency.",
riskBySize:{'<10,000':[100000,250000],'10,000‚Äì50,000':[150000,400000],'50,000‚Äì100,000':[200000,500000],'100,000‚Äì250,000':[250000,600000],'250,000‚Äì500,000':[300000,800000],'500,000+':[400000,1000000],'default':[200000,500000]}
}
};

const SERVICE_DETAILS={
"Access Control/Gate Management":"Salient Group officers manage all entry and exit points with strict credential verification protocols. Officers maintain detailed visitor logs, verify identification, and enforce access policies while providing a professional first impression for your facility.",
"Mobile Patrol":"Dedicated patrol units conduct randomized, GPS-tracked patrols of your entire property on scheduled intervals. Patrol routes are customized based on site-specific risk assessment and adjusted based on incident data and seasonal patterns.",
"CCTV/Camera Monitoring":"Our officers integrate with your existing camera systems to provide real-time monitoring and rapid response. Officers are trained in surveillance best practices, anomaly detection, and evidence preservation protocols.",
"Visitor Management":"Comprehensive visitor management including pre-registration systems, ID verification, badge issuance, and escort protocols. All visitor data is logged digitally for audit trails and compliance reporting.",
"Loading Dock Security":"Specialized dock officers verify all inbound and outbound shipments against manifests, monitor seal integrity, and maintain chain-of-custody documentation. Officers are trained in freight security best practices and loss prevention.",
"Parking Enforcement":"Officers conduct regular parking area patrols, enforce parking policies, provide escort services, and maintain detailed incident logs. Parking areas receive priority coverage during peak vulnerability hours.",
"Emergency Response":"All Salient Group officers are trained in emergency response protocols including evacuation procedures, first aid/CPR, AED operation, and incident command coordination. Site-specific emergency action plans are developed during onboarding.",
"Executive Protection":"Dedicated close protection officers with specialized training provide discreet, professional security for key personnel. Services include advance route planning, secure transportation coordination, and threat assessment.",
"Event Security":"Experienced event security teams provide crowd management, access control, VIP protection, and emergency planning tailored to each event's unique requirements. Officers are briefed on event-specific protocols and communication procedures.",
"Fire Watch":"Certified fire watch officers conduct continuous patrols monitoring for fire hazards, maintaining fire prevention equipment, and ensuring compliance with local fire codes and hot work permit requirements."
};

const PAIN_RESPONSES={
"guards_no_show":{title:"Reliable Attendance Guarantee",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',text:"Every officer check-in is GPS-verified and time-stamped. Our automated attendance system alerts operations immediately if an officer is late, and our dedicated backup pool ensures same-shift replacement ‚Äî guaranteed."},
"cant_reach":{title:"Dedicated Account Manager",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>',text:"You'll have a dedicated account manager with a direct phone line ‚Äî not a call center, not a voicemail tree. Plus, our 24/7 operations center is always staffed and ready to respond."},
"no_visibility":{title:"Real-Time Visibility",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>',text:"Our technology platform provides real-time GPS tracking, digital incident reports with photos, automated checkpoint verification, and a client portal with 24/7 access to dashboards, analytics, and officer activity."},
"high_turnover":{title:"Officer Retention Programs",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg>',text:"We invest in our officers with competitive compensation, career development pathways, recognition programs, and professional growth opportunities. Our retention rates significantly exceed industry averages ‚Äî meaning you see the same trusted faces every day."},
"cookie_cutter":{title:"Custom-Tailored Security",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>',text:"Every Salient Group security plan is built from the ground up based on a comprehensive site assessment. Your post orders, patrol routes, and protocols are designed specifically for your facility ‚Äî not copied from a template."},
"too_expensive":{title:"Transparent Value",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>',text:"Our pricing is straightforward with no hidden fees, no surprise charges, and no inflated overtime rates. We focus on delivering measurable value ‚Äî because the cost of one security incident typically exceeds a full year of professional security investment."},
"no_manager":{title:"On-Site Management",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="8.5" cy="7" r="4"/><path d="M20 8v6M23 11h-6"/></svg>',text:"Every Salient Group account includes a dedicated site supervisor who conducts weekly on-site visits, manages officer performance, and serves as your direct operational contact. You'll never wonder who's in charge of your security."}
};

function generateProposal(){
const d={
company:v('companyName'),contact:v('contactName'),title:v('contactTitle'),email:v('contactEmail'),phone:v('contactPhone'),
street:v('addrStreet'),city:v('addrCity'),state:v('addrState'),zip:v('addrZip'),
industry:v('industry'),facility:v('facilityType'),sqft:v('sqft'),entrances:v('entrances')||'2',buildings:v('buildings')||'1',
parking:v('parking'),hours:getRadio('hours'),currentProvider:v('currentProvider'),
pains:getChecked('pain'),services:getChecked('service'),concerns:getChecked('concern'),
roster:getRosterData(),
slas:getSlaData(),
phases:getPhaseData()
};
if(!d.company||!d.industry){alert('Please fill in Company Name and Industry.');return}
if(d.roster.length===0){alert('Please add at least one position to the roster.');return}
const today=new Date().toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});
const ind=INDUSTRY_DATA[d.industry]||INDUSTRY_DATA['Other'];
const fmt=n=>'$'+Math.round(n).toLocaleString();
const fmtRange=(a,b)=>a===b?fmt(a):fmt(a)+'‚Äì'+fmt(b);

let totalPersonnel=0,totalHours=0,weeklyMin=0,weeklyMax=0;
d.roster.forEach(r=>{totalPersonnel+=r.qty;totalHours+=r.qty*r.hrs;weeklyMin+=r.qty*r.hrs*r.rateMin;weeklyMax+=r.qty*r.hrs*r.rateMax});
const monthlyMin=Math.round(weeklyMin*4.33),monthlyMax=Math.round(weeklyMax*4.33);
const annualMin=weeklyMin*52,annualMax=weeklyMax*52;

const riskData=ind.riskBySize[d.sqft]||ind.riskBySize['default'];
let riskMin=riskData[0],riskMax=riskData[1];
if(riskMin<=annualMin){riskMin=Math.round(annualMin*1.8)}
if(riskMax<=annualMax){riskMax=Math.round(annualMax*2.5)}
if(riskMin>=riskMax) riskMax=Math.round(riskMin*1.6);
const savingsMin=riskMin-annualMax;
const savingsMax=riskMax-annualMin;
const roiLow=Math.max(1.5,(riskMin/annualMax)).toFixed(1);
const roiHigh=(riskMax/annualMin).toFixed(1);

const hasArmed=d.roster.some(r=>r.typeId==='armed_officer'||r.typeId==='executive_protection');

let execSummary=`Salient Group is pleased to present this comprehensive security proposal for ${d.company}. `;
if(d.industry!=='Other')execSummary+=`As a leader in the ${d.industry.toLowerCase()} sector, your organization faces distinct security challenges that demand a specialized, proactive approach. `;
if(d.pains.length>0){
if(d.pains.includes('guards_no_show')||d.pains.includes('cant_reach'))execSummary+=`We understand that your current security experience has not met expectations ‚Äî and that reliability and responsiveness are non-negotiable. `;
else if(d.pains.includes('no_visibility'))execSummary+=`We recognize your need for greater transparency and accountability in your security program. `;
else execSummary+=`Based on our understanding of your current challenges, we have designed a program that directly addresses your operational pain points. `;
}
execSummary+=`This proposal outlines a tailored security program for your ${d.facility?d.facility.toLowerCase():'facility'}${d.sqft?' spanning approximately '+d.sqft+' square feet':''}, featuring ${totalPersonnel} dedicated security professional${totalPersonnel>1?'s':''} providing ${totalHours.toLocaleString()} hours of weekly coverage${hasArmed?' including armed officer capabilities':''}. Salient Group combines experienced security professionals, advanced technology, and dedicated account management to deliver measurable results ‚Äî not just a guard standing at a door.`;

let siteRisks=`Your ${d.facility?d.facility.toLowerCase():'facility'}`;
if(d.sqft)siteRisks+=` encompasses approximately ${d.sqft} square feet of operational space`;
siteRisks+=` with ${d.entrances} access point${parseInt(d.entrances)>1?'s':''} and ${d.buildings} building${parseInt(d.buildings)>1?'s':''}`;
if(d.parking&&d.parking!=='No')siteRisks+=`, along with ${d.parking} parking area${d.parking!=='1'?'s':''}`;
siteRisks+=`. `;
if(parseInt(d.entrances)>=4)siteRisks+=`The multiple access points create additional vulnerability surfaces that require coordinated coverage and monitoring. `;
if(d.parking&&d.parking!=='No')siteRisks+=`Parking areas are statistically among the highest-risk zones for property crime and personal safety incidents. `;
if(d.hours==='24/7')siteRisks+=`Your 24/7 operational schedule requires continuous security coverage with particular attention to overnight and weekend vulnerability windows. `;
else if(d.hours==='Business Hours')siteRisks+=`After-hours periods when the facility is unoccupied represent the highest-risk windows for unauthorized access and property crime. `;
if(d.state)siteRisks+=`${d.state} regulatory requirements and local security licensing standards are fully incorporated into our staffing and training protocols.`;

const days=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];

const whyCards=d.pains.filter(p=>PAIN_RESPONSES[p]).map(p=>PAIN_RESPONSES[p]);
if(whyCards.length===0) whyCards.push(PAIN_RESPONSES['cant_reach'],PAIN_RESPONSES['no_visibility'],PAIN_RESPONSES['cookie_cutter']);

// Roster table with location
const rosterTableRows=d.roster.map(r=>{
let desc=POSITION_DESCRIPTIONS[r.typeId]||'Site security, access control, patrol, incident response, reporting.';
if(r.location) desc=`Assigned to ${r.location}. `+desc;
const rate=r.mode==='exact'?fmt(r.rateMin)+'/hr':fmt(r.rateMin)+'‚Äì'+fmt(r.rateMax)+'/hr';
const dn=displayName(r);
return`<tr><td><strong>${dn}</strong></td><td>${r.qty}</td><td>${r.hrs}</td><td>${rate}</td></tr><tr><td colspan="4" style="font-size:.75rem;color:var(--gray);padding:.3rem .75rem .7rem;border-bottom:1px solid #ddd;font-style:italic">${desc}</td></tr>`;
}).join('');

// Coverage schedule
const scheduleRows=d.roster.map(r=>{
const hrsPerDay=r.hrs/7;
const is24=r.hrs>=140;
const isBiz=r.hrs<=56;
const dn=r.location?r.label.split(' (')[0]+' ‚Äî '+r.location:r.label;
let cells=days.map(day=>{
if(is24) return`<div class="sg-cell sg-active">24h</div>`;
if(isBiz){
let isWeekend=day==='Sat'||day==='Sun';
return isWeekend?`<div class="sg-cell sg-inactive">‚Äî</div>`:`<div class="sg-cell sg-active">${Math.round(r.hrs/5)}h</div>`;
}
return`<div class="sg-cell sg-active">${Math.round(hrsPerDay)}h</div>`;
}).join('');
return`<div class="sg-label">${dn} (√ó${r.qty})</div>${cells}`;
}).join('');

// Pricing table with location
const pricingRows=d.roster.map(r=>{
const dn=displayName(r);
const rate=r.mode==='exact'?fmt(r.rateMin)+'/hr':fmt(r.rateMin)+'‚Äì'+fmt(r.rateMax)+'/hr';
const wMin=r.qty*r.hrs*r.rateMin,wMax=r.qty*r.hrs*r.rateMax;
const mMin=Math.round(wMin*4.33),mMax=Math.round(wMax*4.33);
const aMin=wMin*52,aMax=wMax*52;
return`<tr><td>${dn}</td><td>${r.qty}</td><td>${r.hrs}</td><td>${rate}</td><td>${fmtRange(wMin,wMax)}</td><td>${fmtRange(mMin,mMax)}</td><td>${fmtRange(aMin,aMax)}</td></tr>`;
}).join('');

// Org chart
const hasMgr=d.roster.some(r=>r.typeId==='site_manager');
const hasAsstMgr=d.roster.some(r=>r.typeId==='asst_site_manager');
const hasSup=d.roster.some(r=>r.typeId==='shift_supervisor');

// SLA output ‚Äî only enabled items
const enabledSlas=d.slas.filter(s=>s.enabled);

// Implementation timeline
const phases=d.phases;

// Build SLA section HTML
let slaHtml='';
if(enabledSlas.length>0){
slaHtml=`<div class="sla-grid">${enabledSlas.map(s=>{
// Extract a short display value from the full text
let val=s.value;
let shortVal=val;
// Try to extract a punchy short value
if(val.match(/^\d/)) shortVal=val.split(' ').slice(0,3).join(' ');
else if(val.length<=30) shortVal=val;
else shortVal=val.substring(0,30)+'‚Ä¶';
return`<div class="sla-item"><div class="sla-val">${shortVal}</div><div class="sla-label">${s.label}</div></div>`;
}).join('')}</div>`;
}

// Build timeline section HTML
let timelineHtml='';
if(phases.length>0){
timelineHtml=`<div class="timeline">${phases.map((p,i)=>`<div class="tl-item"><div class="tl-dot">${i+1}</div><div class="tl-content"><h4>${p.duration?p.duration+' ‚Äî ':''}${p.name}</h4><p>${p.desc}</p></div></div>`).join('')}
<div class="tl-item"><div class="tl-dot">‚úì</div><div class="tl-content"><h4>Ongoing ‚Äî Continuous Improvement</h4><p>Regular performance reviews, business assessments, security audits, and continuous protocol optimization based on incident data and evolving threats.</p></div></div>
</div>`;
}

let html=`
<!-- COVER -->
<div class="page cover">
<div class="cover-logo"><svg viewBox="0 0 80 80" fill="none"><path d="M40 4L8 20v24c0 18.67 13.64 36.12 32 40 18.36-3.88 32-21.33 32-40V20L40 4z" fill="rgba(255,255,255,.1)" stroke="#fff" stroke-width="2"/><path d="M40 12L14 24.5v17.5c0 15.87 11.09 30.74 26 34 14.91-3.26 26-18.13 26-34V24.5L40 12z" stroke="#fff" stroke-width="1" fill="none" opacity=".5"/><path d="M28 40l8 8 16-16" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
<h1>Security Proposal</h1>
<div class="cover-sub">Comprehensive Security Solutions</div>
<div class="cover-client">Prepared Exclusively For</div>
<div class="cover-company">${d.company}</div>
<div class="cover-date">${today}</div>
<div class="cover-footer">Presented by Salient Group | salient-group.com</div>
</div>

<!-- EXECUTIVE SUMMARY -->
<div class="page"><div class="page-inner">
${pageHeader(2)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg> Executive Summary</div>
<p class="prose">${execSummary}</p>
${pageFooter(d.company)}
</div></div>

<!-- UNDERSTANDING YOUR ENVIRONMENT -->
<div class="page"><div class="page-inner">
${pageHeader(3)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg> Understanding Your Environment</div>
<div class="section-subtitle">Industry Threat Landscape</div>
<p class="prose">${ind.threats}</p>
<div class="section-subtitle">Site-Specific Risk Analysis</div>
<p class="prose">${siteRisks}</p>
${d.concerns.length?`<div class="section-subtitle">Priority Risk Areas</div><p class="prose">Based on your identified priorities, our security plan places particular emphasis on: <strong>${d.concerns.join(', ')}</strong>. Each of these focus areas is addressed through specific post orders, training protocols, and operational procedures detailed in the following sections.</p>`:''}
${pageFooter(d.company)}
</div></div>

<!-- RECOMMENDED SECURITY PLAN -->
<div class="page"><div class="page-inner">
${pageHeader(4)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> Recommended Security Plan</div>
<div class="section-subtitle">Staffing Configuration</div>
<table class="p-table">
<thead><tr><th>Position</th><th>Qty</th><th>Hrs/Wk</th><th>Rate</th></tr></thead>
<tbody>${rosterTableRows}</tbody>
</table>

<div class="section-subtitle">Weekly Coverage Schedule</div>
<div class="schedule-grid">
<div class="sg-header"></div>${days.map(d=>`<div class="sg-header">${d}</div>`).join('')}
${scheduleRows}
</div>

${d.services.length?`<div class="section-subtitle">Specialized Services</div>${d.services.map(s=>`<p class="prose"><strong>${s}:</strong> ${SERVICE_DETAILS[s]||'Customized service delivery based on your specific operational requirements.'}</p>`).join('')}`:''}
${pageFooter(d.company)}
</div></div>

<!-- TECHNOLOGY -->
<div class="page"><div class="page-inner">
${pageHeader(5)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg> Technology & Reporting</div>
<p class="prose">Salient Group leverages an integrated technology platform to deliver unprecedented visibility and accountability in your security program. Every aspect of officer performance is tracked, verified, and reported in real time.</p>
<table class="p-table">
<thead><tr><th>Capability</th><th>Description</th></tr></thead>
<tbody>
<tr><td><strong>GPS Tracking</strong></td><td>Real-time location tracking for all on-duty officers with historical route playback</td></tr>
<tr><td><strong>Geofenced Check-In</strong></td><td>Automated, tamper-proof clock-in/clock-out within your facility's geofence boundary</td></tr>
<tr><td><strong>Digital Incident Reports</strong></td><td>Officers submit incident reports with photos, video, and GPS coordinates in real time</td></tr>
<tr><td><strong>NFC Tour Verification</strong></td><td>Officers scan NFC checkpoints on patrol routes to verify completion of security rounds</td></tr>
<tr><td><strong>Shift Alerts</strong></td><td>Automated shift reminders, late arrival alerts, and no-show escalation protocols</td></tr>
<tr><td><strong>Analytics Dashboard</strong></td><td>Monthly reports with incident trends, response times, checkpoint completion rates, and attendance</td></tr>
<tr><td><strong>Client Portal</strong></td><td>24/7 web-based access to real-time officer status, reports, and historical data</td></tr>
</tbody></table>
${pageFooter(d.company)}
</div></div>

<!-- TEAM STRUCTURE -->
<div class="page"><div class="page-inner">
${pageHeader(6)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg> Our Team Structure</div>
<div class="org-chart">
<div class="org-node">Dedicated Account Manager</div>
<div class="org-connector"></div>
${hasMgr?'<div class="org-node">Site Manager</div><div class="org-connector"></div>':''}
${hasAsstMgr?'<div class="org-node support">Assistant Site Manager</div><div class="org-connector"></div>':''}
<div class="org-row">
${hasSup?'<div class="org-branch"><div class="org-connector"></div><div class="org-node">Shift Supervisor(s)</div><div class="org-connector"></div><div class="org-node" style="font-size:.7rem">Security Team ('+totalPersonnel+' Total)</div></div>':'<div class="org-branch"><div class="org-connector"></div><div class="org-node" style="font-size:.7rem">Security Team ('+totalPersonnel+' Total)</div></div>'}
<div class="org-branch"><div class="org-connector"></div><div class="org-node support">24/7 Operations Center</div></div>
</div>
</div>
${hasMgr?`<div class="section-subtitle">Site Manager</div><p class="prose">${POSITION_DESCRIPTIONS['site_manager']}</p>`:'<div class="section-subtitle">Account Manager</div><p class="prose">Your dedicated account manager serves as your single point of contact for all security matters. They conduct regular business reviews, manage staffing decisions, and ensure your security program evolves with your needs.</p>'}
${hasAsstMgr?`<div class="section-subtitle">Assistant Site Manager</div><p class="prose">${POSITION_DESCRIPTIONS['asst_site_manager']}</p>`:''}
${hasSup?`<div class="section-subtitle">Shift Supervisors</div><p class="prose">${POSITION_DESCRIPTIONS['shift_supervisor']}</p>`:''}
<div class="section-subtitle">Security Officers</div>
<p class="prose">All Salient Group security officers undergo comprehensive background checks, drug testing, and state licensing verification. Officers receive initial training on your site-specific protocols and ongoing professional development throughout their assignment.</p>
${pageFooter(d.company)}
</div></div>

<!-- IMPLEMENTATION -->
<div class="page"><div class="page-inner">
${pageHeader(7)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg> Implementation Timeline</div>
<p class="prose">Salient Group follows a structured implementation process to ensure a seamless transition and operational readiness.</p>
${timelineHtml}
${pageFooter(d.company)}
</div></div>

<!-- PRICING -->
<div class="page"><div class="page-inner">
${pageHeader(8)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg> Investment Summary</div>
<table class="p-table">
<thead><tr><th>Position</th><th>Qty</th><th>Hrs/Wk</th><th>Rate</th><th>Weekly</th><th>Monthly</th><th>Annual</th></tr></thead>
<tbody>
${pricingRows}
<tr style="font-weight:700;background:#f0f4f8"><td colspan="4">Grand Total</td><td>${fmtRange(weeklyMin,weeklyMax)}</td><td>${fmtRange(monthlyMin,monthlyMax)}</td><td>${fmtRange(annualMin,annualMax)}</td></tr>
</tbody></table>
<div class="disclaimer">Final pricing determined after complimentary on-site security assessment. Rates reflect staffing complexity, scheduling requirements, and specialized service needs. No hidden fees or surprise charges.</div>
${pageFooter(d.company)}
</div></div>

<!-- SLA -->
<div class="page"><div class="page-inner">
${pageHeader(9)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg> Service Level Agreements</div>
<p class="prose">Salient Group backs every engagement with clearly defined service commitments ‚Äî because accountability is the foundation of trust.</p>
${slaHtml}
${pageFooter(d.company)}
</div></div>

<!-- WHY SALIENT GROUP + ROI -->
<div class="page"><div class="page-inner">
${pageHeader(10)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M12 2L4 7v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V7l-8-5z"/></svg> Why Salient Group</div>
<div class="why-grid">
${whyCards.map(c=>`<div class="why-card"><h4>${c.icon} ${c.title}</h4><p>${c.text}</p></div>`).join('')}
</div>
<div class="roi-box">
<h3>Return on Investment</h3>
<div class="roi-row"><span class="roi-label">Estimated Annual Risk Exposure (without professional security)</span><span class="roi-val">${fmtRange(riskMin,riskMax)}</span></div>
<div class="roi-row"><span class="roi-label">Proposed Annual Security Investment</span><span class="roi-val">${fmtRange(annualMin,annualMax)}</span></div>
<div class="roi-row highlight"><span class="roi-label">Estimated Net Annual Savings</span><span class="roi-val">${fmtRange(Math.max(0,savingsMin),savingsMax)}</span></div>
<div class="roi-row"><span class="roi-label">Return on Investment</span><span class="roi-val">${roiLow}:1 ‚Äì ${roiHigh}:1</span></div>
<div class="roi-note">Risk estimates based on industry data from ASIS International, FBI Uniform Crime Reports, and National Retail Federation. Actual exposure varies by location and operations.</div>
</div>
${pageFooter(d.company)}
</div></div>

<!-- NEXT STEPS -->
<div class="page"><div class="page-inner">
${pageHeader(11)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg> Next Steps</div>
<div class="cta-box">
<h3>Schedule Your Complimentary Security Assessment</h3>
<p>Our team is ready to conduct an on-site evaluation of your facility at no cost or obligation. This assessment will provide a detailed risk analysis and allow us to finalize a security plan tailored to your exact needs.</p>
<a href="mailto:sam@salient-group.com?subject=Security%20Assessment%20Request%20‚Äî%20${encodeURIComponent(d.company)}" class="cta-btn">Request Assessment ‚Üí</a>
</div>
<div style="text-align:center;margin:2rem 0">
<p class="prose" style="font-size:.95rem"><strong>Sam Bowen</strong>, CEO</p>
<p class="prose">sam@salient-group.com</p>
<p class="prose">(XXX) XXX-XXXX</p>
<p class="prose" style="margin-top:1rem;font-size:.75rem;opacity:.6">salient-group.com | Nationwide Operations</p>
</div>
${pageFooter(d.company)}
</div></div>

<!-- TERMS -->
<div class="page"><div class="page-inner">
${pageHeader(12)}
<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="var(--navy)" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6"/></svg> Terms & Conditions</div>
<ul class="terms-list">
<li><strong>Cancellation:</strong> Either party may terminate this agreement with 30 days written notice. No early termination fees apply after the initial 90-day period.</li>
<li><strong>Billing:</strong> Services are billed monthly in arrears based on actual hours worked. Payment is due within 30 days of invoice date. No hidden fees or administrative charges.</li>
<li><strong>Insurance & Bonding:</strong> Salient Group maintains comprehensive general liability insurance, workers' compensation coverage, and surety bonding. Certificates of insurance are provided upon request.</li>
<li><strong>Liability:</strong> Salient Group assumes responsibility for officer conduct while on assignment. Liability is limited to the scope of contracted services as defined in the executed service agreement.</li>
<li><strong>Confidentiality:</strong> All information shared during the assessment and service period is treated as confidential. Salient Group does not share client information with third parties without written consent.</li>
<li><strong>Compliance:</strong> All services are delivered in compliance with applicable federal, state, and local laws, including security licensing requirements, labor regulations, and industry standards.</li>
</ul>
<p class="prose" style="margin-top:2rem;font-style:italic;text-align:center;opacity:.7">This proposal is valid for 60 days from the date of presentation.<br>¬© ${new Date().getFullYear()} Salient Group. All rights reserved.</p>
${pageFooter(d.company)}
</div></div>`;

document.getElementById('proposalBody').innerHTML=html;
document.getElementById('formContainer').style.display='none';
document.getElementById('appHeader').style.display='none';
document.getElementById('proposalView').style.display='block';
document.getElementById('emailBtn').onclick=()=>{
window.location.href=`mailto:?subject=${encodeURIComponent('Security Proposal ‚Äî '+d.company)}&cc=sam@salient-group.com&body=${encodeURIComponent('Please find the attached security proposal from Salient Group for '+d.company+'.')}`;
};
window.scrollTo(0,0);
}

function pageHeader(num){
return`<div class="page-header"><div class="page-header-logo"><svg viewBox="0 0 24 24" fill="none"><path d="M12 2L4 6v5c0 7 5.33 13.54 8 15 2.67-1.46 8-8 8-15V6l-8-4z" stroke="var(--navy)" stroke-width="1.5" fill="none"/><path d="M9 12l2 2 4-4" stroke="var(--navy)" stroke-width="1.5" stroke-linecap="round"/></svg><span>SALIENT GROUP</span></div><div class="page-number">Page ${num}</div></div>`;
}
function pageFooter(company){
return`<div class="page-footer">Confidential ‚Äî Prepared exclusively for ${company} | ¬© ${new Date().getFullYear()} Salient Group</div>`;
}

function editProposal(){
document.getElementById('proposalView').style.display='none';
document.getElementById('formContainer').style.display='block';
document.getElementById('appHeader').style.display='flex';
goStep(1);
}
function copyProposal(){
const el=document.getElementById('proposalBody');
const range=document.createRange();range.selectNode(el);
window.getSelection().removeAllRanges();window.getSelection().addRange(range);
document.execCommand('copy');window.getSelection().removeAllRanges();
alert('Proposal copied to clipboard');
}
</script>
</body>
</html>
